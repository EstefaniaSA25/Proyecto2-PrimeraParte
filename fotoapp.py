# -*- coding: utf-8 -*-
"""fotoapp

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1J_7D8M_sp0MY8V_neL80jAg2WBQ2EwZR

# **PYTHON AVANZADO**
# **PROYECTO 2**


---

# Importando modulos para el proyecto
"""

from PIL import Image, ImageOps
import matplotlib.pyplot as plt
import requests
from io import BytesIO
from PIL import ImageFilter #Importamos la función Image del paquete PIL
import numpy as np
import cv2  # OpenCV
from PIL import Image
from skimage import filters
from skimage import color, feature

from google.colab import drive
drive.mount('/content/drive')

"""# *PRIMERA PARTE*

## EJERCICIO 1
Escribir una función que reciba como parámetros dos strings, uno contendrá la ruta para acceder a una imagen (Drive o URL), y el otro una palabra clave, que podrá ser “Youtube, Instagram, Twitter o Facebook”. La función debe leer/abrir la foto y redimensionar la imagen al tamaño adecuado especificado como parámetro para cada una de las palabras clave (busque las dimensiones recomendadas de cada aplicación).
Nota: Tenga en cuenta la escala, no queremos que la foto se distorsione.
"""

def redimensionar_imagen(url_img: str, plataforma: str) -> Image:
    # -> Image indica que la función devolverá un objeto de tipo Image (de la librería PIL)

    # Lee la imagen desde la URL
    response = requests.get(url_img)
    img = Image.open(BytesIO(response.content))  # Convierte los bytes en un objeto tipo archivo

    plataforma_lower = plataforma.lower() # Convierte a minúsculas la plataforma para evitar errores
    permitidas = ['youtube', 'instagram', 'twitter', 'facebook']  # Lista de plataformas permitidas

    if plataforma_lower in permitidas: #revisa que la plataforma que ingreso el usuario este en la lista de plataformas permitidas a redimensionar
        match plataforma_lower:
            case 'youtube':
                img_resize=img.resize((4320, 2160))
            case 'instagram':
                img_resize=img.resize((1080, 1350))
            case 'twitter':
                img_resize=img.resize((1600, 900))
            case 'facebook':
                img_resize=img.resize((1200, 630))
            case _:
                img_resize=img
    else:
        print(f"La plataforma no está permitida. "f"Las plataformas permitidas son: {', '.join(permitidas)}")

    # Mostrar original y redimensionada
    plt.subplot(1, 2, 1)
    plt.imshow(img)
    plt.title("Original")
    plt.axis("on")

    plt.subplot(1, 2, 2)
    plt.imshow(img_resize)
    plt.title(f"Redimensionada ({plataforma})")
    plt.axis("on")

    plt.tight_layout()
    plt.show()
    plt.close('all')

    return img_resize

"""## EJERCICIO 2
Crear una función que ajuste el contraste de la foto utilizando su histograma.
Probarla con una foto oscura y con otra con exceso de luz. Mostrar la foto original y la ecualizada en una misma figura y guardarla en ambos casos (Adjuntar las figuras a la solución del proyecto).
"""

# EJERCICIO 2: Ajustar Contraste
# Se agrega 'nombre_base' como argumento.
def ajustar_contraste(url_img: str, nombre_base: str):
    print("\nAjustando contraste ...")
    # Lee la imagen desde la URL
    response = requests.get(url_img)
    img = Image.open(BytesIO(response.content))  # PIL Image

    # Convertir PIL a NumPy (BGR para OpenCV)
    img_np = np.array(img)

    # Convertir a escala de grises
    img_gray = cv2.cvtColor(img_np, cv2.COLOR_RGB2GRAY)

    # Ecualización del histograma
    equ = cv2.equalizeHist(img_gray)

    # Guardar imágenes con .save
    img.save(f"{nombre_base}_original.png")              # Imagen original
    Image.fromarray(equ).save(f"{nombre_base}_equalizada.png")  # Imagen ecualizada

    fig, axes = plt.subplots(1, 2, figsize=(12, 10))

    # numpy.ravel() devuelve una matriz aplanada (fila) contigua con todos los elementos de la matriz de entrada y con el mismo tipo
    ax = axes.ravel() #

    ax[0].imshow(img)
    ax[0].set_title("Original")
    ax[0].axis("off")

    ax[1].imshow(equ, cmap=plt.cm.gray)
    ax[1].set_title("Equalizada")
    ax[1].axis("off")

    plt.tight_layout()

"""## EJERCICIO 3
Programar una función que aplique los 9 filtros de Pillow de la siguiente tabla. La función debe incluir en sus parámetros el nombre del filtro que el usuario quiere usar.
Mostrar y guardar la foto resultante. Además, mostrar la foto original y las 9
resultantes si se aplicaran todos los filtros en una misma figura y guardarla en  ambos casos.  
Nota: Ponerle como título a cada foto el nombre del filtro, e indicar al usuario cuál fue  el filtro que eligió (por ejemplo con el color del título diferente).


![tabla.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAEHCAYAAADYlf7fAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAEdISURBVHhe7Z0F1B3FlraHwYOF4O4aJLjPcHENGtzdXS8yOAzu7i5B7sV1BgkOwR2Cc9EgCT7Uv55aa/dfXaf7nD7ydfp8eZ+19kq+rl3dffp01X5Lz785IYQQQox2/Ft8QAghhBC9HwkAIYQQYjREAkAIIYQYDZEAEEIIIUZDJACEEEKI0RAJACGEEGI0RAJACCGEGA2RABBCCCFGQwoLgKFDh7r/+Z//ccOHD4+ThBA5DBs2zJcb/hVCiJ6E+Ex9Q7wuQmEB0LdvX/dv//ZvMplMJpPJKm5//vlnHMZrkACQyWQymayXWUcFwH/+53/6k9K9IIQoxn/913/5csO/QgjRk/zv//6v+/d//3f3H//xH+7//u//4uQaJACE6EEkAIQQZSEBIESFkAAQQpSFBIAQFUICQAhRFhIAQlQICQAhRFlIAAhRISQAhBBlIQEgRIWQABBClIUEgBAVQgJACFEWEgBCVAgJACFEWUgACFEhJACEEGUhASBEhZAAEEKUhQSAEBVCAkAIURYSAEJUCAkAIURZSAAIUSEkAIQQZSEBIESFkAAQQpSFBECHKPJbykI0QgJACFEWEgAt8vXXX7sjjjjCLbTQQm6CCSbwn7Vv375u5ZVXdldddZX7448/4iyeSy+91D+bLFthhRXcOuus43bZZRd34403ZoqKt956y/tuuOGGcVLCyJEj3dVXX+1WW201N/PMM7txxhnH3+M888zj9t57b/fOO+/EWTx55+Yl4fgqq6zivv3221RazMCBA73v999/Hycl3HvvvclnHjZsWJycgnvBj3sbHZAA6D18+umnbvnll68p5xyjnOy+++7u7rvvjrN57rrrLu93yCGHuL/++itOroG6wq71448/xskpDjroIO93//33J8eef/75zHu1+11zzTXdVltt5c4991w3fPjw1PlE9yIB0AK33Xabm3jiif3nG2OMMdwcc8zhFllkETfZZJP5Y9iSSy7pPv/88zirO+yww5J8Y445Zsr4Iiy/nYNgHvLcc8/5tOmmmy513OB5TzvttMk5+P+iiy7q+vfv78Yee2x/bKyxxnKnn356nDX33Lfccktyvs022yyVFmPPAIGUB8LEznfooYfGySm4F/y4t9EBCYDew7vvvuvLeVims2yttdZyv/32WyovDQXyEniLCAAaHHat7777Lk5OYeWPRoKd+8EHH0zyx/USFt7vlFNO6d544434tKILkQBoEoK/Beqdd97Zq/yQhx56yPcKkD799NO7b775JpVuAoCWeAyF8bPPPnMXXXSR703A78ADD0z55AVpePLJJ924447r09dff3336quvptJplR9//PFeAOBz++23p9Lzzh0KgKx8IY0EwCeffOKfH70JE000ka9Mfv/999gtQQJAdCsmAPr06eM+/vhj/+5jH330kXvttdd8T+E000zjv+9jjjkmFehHlQBYcMEFM69Hz98999zj5p13Xp93scUWy/QT3YUEQBN89dVXbpJJJvGf65xzzomTE0aMGOGWW2457zdo0KBUWj0BEELlgN9UU02VOp4XpGlBzD777D5tn332SaXFIDDwm3vuuVPH885tAsCGOrinWNgYjQTAscce69PpgaA3gf8z3JGHBIDoVkwAUG7yguWdd97pfWabbbZKCwCDITvrEVAvQPcjAdAERx55pP9MjPM3gnF2xt7xD8eviwqADz/80Pthv/zyS3I8L0gPHjzYH5911lnrtqiBAs7cAHy/+OKL5HjeuU0A0KvAPAX+v8kmm6R8jHoCgOtS0ZHO52P8k//zruQhASC6lSICgPKHD0OK3SAAYJZZZvH56REQ3Y0EQBPMN998/jPddNNNcVImq6++ek1lXlQAMAkIP3ocQvKC9AYbbOCP05VYhKxJennnNgHANWgBTDjhhP7vW2+9NeUH9QQA7wJpyy67rP+bSoveBI7ltSYkAES3UkQAEETxWWmllbpCANDzN9544/n8L774YpwsugwJgIL89NNPSQFjDK8IdHPjTyE2igiAIUOGuBlnnNH77bHHHqm0vCBtE/+YB9AqeecOBQBccMEF/m/G7+NAX08AbLHFFj6Nys3Yf//9/bG99tor5WtIAIhuJZwD8MEHH3jxjPH/l19+2V188cVeAI8//vg173cVBQD3jlAh7/zzz18oYIhqIwFQkPfff99/HqxRF7vB2Db+TAo0TAAQPFk5EBqFavLJJ0+uw5eC8AjJCtIsAbJxOSYbxVCgGUbIsnCpYda5IRYAYBXBxhtvnPLNEwA//PCDrwip7Pi/wURF/Jn0GK94AAkA0a0UWQXAMCETh2NGlQCgfMb10oABA9wMM8yQ3DOTm5nEKLofCYCCvPnmm/7zEGiLcscdd/g8zJw1TADkGd3rjK8TdLO+kKwgTeC0/KwiiBk6dGjNdcyYlGdknRuyBAC9IMzi5zjpRp4AuPDCC/3xrGWEVDKkXXbZZXGSBIDoWkwAUGesuOKKiTGPZokllkjEPl3ql1xySSWGAOL6wYy0VVdd1Z111lkN9xkQ3YMEQEEYM7fCELZg60Ehxj+cNJg1BECPwmOPPeYWXnhhn7bpppu6X3/9NUkPyQvStjoha1yOSYjsAxCaBepWBQDYaoIpppjCr5CAPAHAsiGOb7TRRu7EE09MmU0sZL+CGAkA0a0UmQNwww03JEt3n3766eR4swKAytsCeKPNuliCi9/1119fIwDCIQDO+fbbb/v6iDR6Mhm+EL0HCYAmsGD0yCOPxEmZsKMf/uz4ZWQJAAPlbkv52BEwq+DnBWlaFBxnfL4INvbejgAAq0xsuWOWAKC7kGNFLA70EgCiWykiAID9RPDbYYcdEr9mBQCYkIj3JolZaqmlvF+4C2GWADD4m/JNOiuHvvzyy1S66F4kAJpg33339Z9pm222iZNq+Pnnn5MuvkcffTQ5Xk8AwAsvvJDs2HfyySfHyblB2iYcUriL0CkBwJwD2xXx5ptvzhQA9tzYSvTxxx/PtLXXXtv7bL/99qnzSwCIbqWoADjzzDO9H13z7QgAgjPvDpOI68H8o7hM1RMAQK+nnX+NNdbI9BHdhwRAE7C2n/E6xvQefvjhODkFAZ7Pz8S+sLA0EgBw9NFHex8UfbwHfl6Qpgu+X79+Pu20005LpWVhvRPtCgBg/JJ0hgJssyATAAxvcJxjiJs8qIDwYaJguNe4BIDoVooKAIQx33m7PQD8bgbnOeCAA3LzMMzAeSln4fbDjQQAWLDgGldccUWun+geJACa5NRTT/Wfi0LN+F0MuwCypA0fAjjLfUKKCACCJuP0+PHFhAUtL0gD2xSThu22226pTX4MBMXWW2+d+IW9DHnnbiQAINzfHzMBYBsU8UNE9eAzzjTTTN6XiUaGBIDoVhoJACbTUf7w4TsP68pWBIDtKcDKgmuuuaYmH8v4FlhgAX+tHXfcMZVeRADATjvt5P1obGgooPuRAGiB4447Lim0bKfLGB579jNZxlrhdIXfd999cdZCAgBYz2/XYLKdkRekDWb22kY99FQwJMB90TqwfbwxKgk2DQp/tTDv3EUEAHuc20REzAQA3YX8zW8QNMKCX7hqwgQAS4/YRTDLqNR6CxIAvQcTAFj8ziJ2bcweo9EQBl4TALTU47yhxasHCOxWbzCfiLH7Lbfc0m++Zb8BQq9kPEm3qACgd85+v4DVSvV8RfWRAGgRPhez161LzIzAz178eRNxigoAoBWPL4HVflkwL0iHsGcB92BjfaGxwRBj8gTsmLxzFxEAwDI+uw4VDEsSESFULGz92wh87HnyYoIJgHpGC6u3IAHQe6i3DwACHFHLZF+WC8eYAIjzxUYPQhyEWXJrPYihUTftt99+mauYigoAoD6we2PH0kb+orpIALQJhenZZ5/1E9noYgs31hnV8IUiRJ555hn31FNPFd7BUIw6JABEp0CAI+qfeOIJv3wv7O0TAiQAhKgQEgBCiLKQABCiQkgACCHKQgJAiAohASCEKAsJACEqhASAEKIsJACEqBASAEKIspAAEKJCSAAIIcpCAkCICiEBIIQoCwkAISqEBIAQoiwkAISoEBIAQoiykAAQokJIAAghykICQIgKIQEghCgLCQAhKoQEgBCiLCQAhKgQEgBCiLLoMQHQt29fX5HJZDKZTCarthX5JVsJAJlMJpPJepl1VABoCECI5tEQgBCiLHpsCEACQIjmkQAQQpSFBIAQFUICQAhRFhIAQlQICQAhRFlIAAhRISQAhBBlIQEgRIWQABBClIUEgBAVQgJACFEWEgBCVAgJACFEWUgACFEhJACEEGUhASBEhZAAEEKUhQSAEBVCAkAIURYSAEJUCAkAIURZSAAIUSEkAIQQZSEBIESFkAAQQpSFBIAQFUICQAhRFhIAo5Aiv79cRbr1vrsBCQAhRFlIADTBF1984U488US32GKLucknn9w/uKmnntptsMEG7pFHHonda/j666/dEUcc4RZaaCE3wQQT+OfTt29ft/LKK7urrrrK/fHHH3EWz5lnnumf5w477BAnpfjggw+83zbbbJMc22+//fyxorb33nunzgmt3vell17qz3nOOefESSlef/1177fZZpuljlv+LFthhRXcOuus43bZZRd344039hpRIgHQPTz55JNu+eWXr3k3V1xxRTdw4EC3xx57uNtuu8399ttvcVZPvfc7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bOAOOeQQ98QTT6Sul8fIkSPd1Vdf7VZbbTU388wzu3HGGcdNMMEEbp555nF77723e+edd+IsnksvvbTmHvJs4403jrNn0uo5v//+++T4448/njpnzJFHHun9eDlCVlhhBX/822+/TR2POfDAA73fAw88ECclfPHFF/77wO/222+Pk1OceeaZ3m+HHXaIk1J88MEH3m+bbbaJkxK47oknnugWW2wxN/nkk/uXf+qpp/bvxCOPPBK7e/bYY4+aZ5tnnLsdekIAtHr/P//8c0069re//c2tscYabrvttnMXXXRRw/fBeOWVV9x+++3nFlxwQdevXz835phjuimnnNKf64orrsisbDlm70kRC+uAPJ5//vmmzvn5558necN38a+//kqdN4R3kWvwLoZ++++/v8//0EMPpfxjrrvuOp//5JNPrnudk046yZ9vvfXWq1uBU/7tMz/22GNxcgrePfzy6m7ei6uuusqtvPLKbrrppvPf4ySTTOLPf9lll2V+j+088zxOOeWU5JzHHnts3ecE1J3mf8cdd2T6//777+7CCy90K664opt00kl9WRxvvPHcoosu6o4//nj33XffxVk8fGbKRfw5MK5J7KA+Pu6449zbb78dZ2/6+Xz22WfxKVqi0gLgjz/+8OcoalQiBgUtTs8yKp/hw4enrhvC/U877bSJP//nZejfv78be+yx/bGxxhrLnX766XFWd9hhh9VcL89mmmmmOHsmrZ7z66+/To7PPvvsXtTkQTDE75Zbbkkdp6BznCBaj1VXXdX7XXPNNXFSAhWX3c9SSy0VJ6fYfffdE9+LL744Tk549dVXvQ/fTRY33XSTm2iiibwP39mss87qBgwY4CsvO//BBx8cZ3PLLLNM6rnWs6233jrO3hQ9IQBavf+ffvrJjTHGGDU+sfXt29fdfPPNqWuG/Prrr27bbbdN/Mcdd1w377zzehGG+LLjCyywgPvkk09SeakDityD2eWXX57Kn8WDDz7Y1DkJ5gZiyo4jfvLgXeQavIthoFlppZV83uuvvz7lH0P5ID8iKytQwS+//OKFlN3PfffdF7skUP7tM1P+R4wYEbskbLjhht6X7zS+9ssvv+zmnHNOfx58qA8XWWSR1PdIIIzrl2af+fvvv5/KnwUizM6JmCd414P3y85PAzH+bG+++aaba665Eh+r66effvrkOnzOIUOGpPIB7ymBFB/qydjCz0YDku8/vD6C0PIXsSLPpwhdIwBoPVA51LPwpTMBsNtuu6V8KMzPPvusL2ATTzyx91luueXcb7/9lro2PPnkk76ywmf99df3hToEVY0qJJjgE7dkLVjTCojvNbZGQdVo9ZyhAMDoucijDAFAQSPwWoX40ksvxS4JoQAggH/00Uexi6eeALj22mt9Gp/hiCOOSCl51PuVV17p+vTp431odYVYAKXCj59xbHkthKL0pABo9v5DAfDuu+8mPh9//LGvLP/5z3/6VqA913/84x+p6wKV3DrrrON9pphiCnfJJZfUBB/KGWIAn4UXXjjVggwFAMEnvt/Y4sCThQUj3kE+S3yO2ML7CQUA7+KHH36YOrdRhgCglwAfK6/rrrturm8oALC99tor1zdPANBynXDCCX1+fN56661UPoKJiQMaVmHedp55HiYArI6mxzHvM73++us+0NkziAUAcQERQRqxixgRwmfdaKONfH4COJ81zB8KgKweMd5LWvlrr722P8f444/vvvzyyyTdBADPh/otfh6xFXk+RegaAcAL3AwmALJadAZd97Re8DvrrLNSaQgClDJp++yzTyothooVv7nnnjt13II1AaxTtHpOEwC8vPRc8BI++uijsZunpwUAQxCkDxw40Lfo+f8uu+wSuyWYAGDYhX8JOlnkCQAKjIm9ehXvbbfd5n2o5MJeIQug8fPoCXpSADR7/6EAoNs3D/t+aDHFfnQJkzbZZJN5EZEHomCOOebwvjfccENyPBQAX331VSpPq1gwioNzEUwAhO9i1jnKEAB2rueee863UimfvOtZmAAIy388xGdkCQD+NZG244475t7TsGHDkh41nrPRzjPPwwSABdV6wzKIfnxo7HFvsQBYdtll/XGCPO9cHsQVzkPv4Q8//JAcbyQADHopGDqO78EEAM+nSCDuFKO1AADGsvCbYYYZUscHDx7sj/NFN+pa4ktkbgC+YXBsNVjXo9VzmgCgIj766KP9/2ebbbbMFlNPCwDrDubZ0+JEwRN0f/zxx9jVYwGGoMiYMf9nnC4mTwAcddRR/jjzPxqx5JJL+lZoOE7aagBthW4UAJQPa/kR8EPmn3/+zONZMIRHy4j306iqAGCejL2LF1xwQc15eloA0PNAxT3LLLP49IMOOsj7c19Z/iYAKP+UB/5P+Y97YyBLABAo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XGWRBy+1FTa646CIAADrPcgSAMALzsx0O39oBEeGb7K6VptZR4+1Q08KgKKWJQBio5XOpj/swFYkIHFO3gdaiPE5qfT4qWnet7gSCgVAEaNcN6oYm1mTjoXb6xYRALDVVlt5v04JgBtvvNH/jRBr9PmAZ40/uxRSxxURAED5twZSlgAAenEYXoifIQKAJcJZvXztPPM88gQAvXkEtXC3UaOeAAB6T/ju7LcezHhH2eUyr5HWjABg6MB+lfSAAw7w99HMPgBFn08RKi0AqgYPiI1l2PSElyzvV+lE9UGwMQzEcADDOJ0oTJ2gJwRA1UBYEGgYr2W2fKsbNIlRC+P9/GoedTzzE7LEc7fCZ2G3ROoHfvmy3Q2+qooEgBAVYnQQAEKIaiABIESFkAAQQpSFBIAQFUICQAhRFhIAQlQICQAhRFlIAAhRISQAhBBlIQEgRIWQABBClIUEgBAVQgJACFEWEgBCVAgJACFEWUgACFEhJACEEGUhASBEhZAAEEKUhQSAEBVCAkAIURYSAEJUCAkAIURZSAAIUSEkAIQQZdFjAsB+V1kmk8lkMlm17c8//4zDeA0SADKZTCaT9TLrqADQEIAQzaMhACFEWfTYEIAEgBDNIwEghCgLCQAhKoQEgBCiLCQAhKgQEgBCiLKQABCiQkgACCHKQgJAiAohASCEKAsJACEqhASAEKIsJACEqBASAEKIspAAEKJCSAAIIcpCAkCICiEBIIQoCwkAISqEBIAQoiwkAISoEBIAQoiykAAQokJIAAghykICQIgKIQEghCgLCQAhKoQEgBCiLCQARC5Ffh9adBYJACFEWUgAtAlBks9a1O69994k78knn5wcP+6441LnzeKSSy5J/P/xj38kxz/99NOa62DLL7+8GzhwoNt9993d3XffnTpXFl9//bU74ogj3EILLeQmmGAC//317dvXrbzyyu6qq65yf/zxR5wlxRdffOEOPPBA179/f59/7LHHdtNNN53baKON3H333Re7p7j11lvd2muv7aacckr/Qk488cRu4YUXdkceeaT77rvvYvdeiwRAaxx++OE173+WUR7++usvn+ett97yZWTDDTdMjgGVIsdXWWUV98033wRXqWWdddbx5x0+fHhy7IILLqi5rp1vgw02cIcccoh74oknUucpwmWXXVZz3jzbeOONU59p5513rvHhnlZb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)  
"""

def aplicar_filtro(ruta_imagen: str, filtro_elegido: str = None):

    #Aplica uno o varios filtros de Pillow a una imagen.
    #- Si se elige un filtro, se aplica ese y se guarda la imagen.
    #- Siempre se muestra la imagen original junto con los 9 filtros disponibles.

    # Leer imagen desde URL o ruta local
    if ruta_imagen.startswith("http"):
        response = requests.get(ruta_imagen)
        img = Image.open(BytesIO(response.content))
    else:
        img = Image.open(ruta_imagen)

    # Lista de filtros de Pillow
    filtros = {
        "BLUR": ImageFilter.BLUR,
        "CONTOUR": ImageFilter.CONTOUR,
        "DETAIL": ImageFilter.DETAIL,
        "EDGE_ENHANCE": ImageFilter.EDGE_ENHANCE,
        "EDGE_ENHANCE_MORE": ImageFilter.EDGE_ENHANCE_MORE,
        "EMBOSS": ImageFilter.EMBOSS,
        "FIND_EDGES": ImageFilter.FIND_EDGES,
        "SHARPEN": ImageFilter.SHARPEN,
        "SMOOTH": ImageFilter.SMOOTH
    }


    # Aplicar filtro elegido y guardar
    img_filtrada = img
    if filtro_elegido:
        filtro_elegido = filtro_elegido.upper()
        if filtro_elegido not in filtros:
            raise ValueError(f"Filtro no válido. Opciones: {', '.join(filtros.keys())}")

        # Guardar la imagen original
        img.save("imagen_original_filtro.jpg")

        # Guardar la imagen con filtro
        img_filtrada = img.filter(filtros[filtro_elegido])
        nombre_salida = f"imagen_{filtro_elegido}.jpg"
        img_filtrada.save(nombre_salida)
        print(f"Imagen original guardada como 'imagen_original.jpg'")
        print(f"Filtro '{filtro_elegido}' aplicado y guardado como {nombre_salida}")

    # Mostrar imagen original + filtros
    fig = plt.figure(figsize=(14, 14))
    fig.suptitle("Imagen original y filtros", fontsize=18, fontweight="bold")

    # Imagen original
    ax0 = fig.add_subplot(4, 3, 1)
    ax0.imshow(img)
    ax0.set_title("ORIGINAL", fontsize=12, fontweight="bold")
    ax0.axis("off")

    # Mostrar filtros
    for i, (nombre, filtro) in enumerate(filtros.items(), start=2):
        ax = fig.add_subplot(4, 3, i)
        img_f = img.filter(filtro)
        ax.imshow(img_f)
        ax.axis("off")
        ax.set_title(nombre, fontsize=12,fontweight="bold" if filtro_elegido == nombre else "normal",color="red" if filtro_elegido == nombre else "black")

    plt.tight_layout()
    plt.show()
    plt.close('all')

    return img_filtrada

"""## EJERCICIO 4
Caso hipotético: Se llevó a cabo un análisis de usuarios que demostró que el 35% de los posibles futuros usuarios son pintores que compartirían fotos de sus trabajos allí, por lo cual les pedimos que diseñen una funcionalidad en Python para asistirlos.
El objetivo es que cuando el algoritmo identifica con IA que la foto leída es de una persona (suponga que hay otra función que ya ha hecho este paso previo con una variable persona=True), ayude a los usuarios a dibujar el boceto de la persona de la foto. Prueben su función con una foto de un personaje de su elección.
El resultado puede ser una imagen binarizada como la del ejemplo (con fondo blanco o negro), o una imagen que realce mucho los bordes… Usen su creatividad y justifiquen el resultado de la función demostrando que sería la mejor herramienta para los usuarios pintores/dibujantes comparando diferentes resultados.
"""

def crear_boceto(url_img: str, modo="lapiz", guardar=True):
    print(f"\nCreando boceto en modo: {modo}")

    # Lee la imagen desde URL
    response = requests.get(url_img)
    img_pil = Image.open(BytesIO(response.content))
    img = np.array(img_pil)

    if modo == "lapiz":
        # Boceto estilo lápiz con OpenCV
        img_bgr = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)
        gray = cv2.cvtColor(img_bgr, cv2.COLOR_BGR2GRAY)
        inv = 255 - gray
        blur = cv2.GaussianBlur(inv, (21, 21), 0)
        boceto = cv2.divide(gray, 255 - blur, scale=256)

    elif modo == "bordes":
        #Boceto de bordes con scikit-image
        gray_scikit = color.rgb2gray(img)
        edges = feature.canny(gray_scikit, sigma=2)
        boceto = (edges.astype(np.uint8) * 255)

    else:
        raise ValueError("Modo no válido. Use 'lapiz' o 'bordes'.")

    # Mostrar
    fig, axes = plt.subplots(1, 2, figsize=(10, 5))
    axes[0].imshow(img)
    axes[0].set_title("Original")
    axes[0].axis("off")

    axes[1].imshow(boceto, cmap="gray")
    axes[1].set_title(f"Boceto ({modo})")
    axes[1].axis("off")

    plt.show()

    # Guardar imagen
    if guardar:
        # Guardar imagen original
        img_pil.save("imagen_original_boceto.jpg")
        #Guardar imagen del boceto
        nombre = f"boceto_{modo}.jpg"
        Image.fromarray(boceto).save(nombre)
        print("Imagen original guardada como 'imagen_original.jpg'")
        print(f"Boceto guardado '{nombre}'")

"""## EJERCICIO 5
Crear un menú de opciones que le permita al usuario hacer todas las operaciones, tener en cuenta que para todas las opciones es necesario pasar primero por la función 1, por lo cual, asistan al usuario para que no se salte la lectura de las imágenes y usen excepciones en sus funciones para validarlo.
"""

def menu_principal():
    """
    Menú interactivo para acceder a todas las funciones del módulo.
    Primero pide cargar una imagen y luego permite aplicar distintas operaciones.
    """

    print("Bienvenido a FotoApp")
    print("Esta aplicación permite editar imágenes fácilmente.\n")

    # Cargar imagen al inicio
    ruta = input("Ingrese URL o ruta local de la imagen: ")
    print("Imagen cargada con éxito.")

    while True:
        print("\nMenú de FotoApp:")
        print("1 - Redimensionar imagen")
        print("2 - Ajustar contraste")
        print("3 - Aplicar filtro de Pillow")
        print("4 - Crear boceto para pintores")
        print("5 - Cambiar imagen")
        print("6 - Salir")

        opcion = input("Ingrese número de opción: ")

        try:
            if opcion == "1":
                red = input("Ingrese red social (Instagram, Facebook, Twitter, YouTube): ")
                redimensionar_imagen(ruta, red)
                print("Imagen redimensionada con éxito.")

            elif opcion == "2":
                nombre_base = input("Ingrese un nombre para guardar esta imagen (ej: 'oscura' o 'brillante'): ")
                ajustar_contraste(ruta, nombre_base)
                print("Contraste ajustado y guardado.")

            elif opcion == "3":
                filtro = input("Ingrese el filtro a aplicar (BLUR, CONTOUR, DETAIL, EDGE_ENHANCE, EDGE_ENHANCE_MORE, EMBOSS, FIND_EDGES, SHARPEN, SMOOTH): ")
                aplicar_filtro(ruta, filtro)
                print("Filtro aplicado y guardado.")

            elif opcion == "4":
                modo = input("Ingrese modo de boceto ('bordes' o 'lapiz'): ")
                crear_boceto(ruta, modo)
                print("Boceto creado y guardado.")

            elif opcion == "5":
                ruta = input("Ingrese nueva URL o ruta local de la imagen: ")
                print("Imagen cambiada con éxito.")

            elif opcion == "6":
                print("Saliendo de FotoApp. ¡Hasta luego!")
                break

            else:
                print("Opción inválida. Intente nuevamente.")

        except Exception as e:
            print(f"Error: {e}")